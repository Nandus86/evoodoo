<odoo>
  <data>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="evo.list">
      <field name="name">evo list</field>
      <field name="model">evo_connector</field>
      <field name="arch" type="xml">
        <list>
          <field name="enabled" />
          <field name="import_contacts" />
          <field name="name" />
          <field name="type" />
          <field name="uuid" />
          <field name="url" />
          <field name="api_key" />
          <field name="manager_channel" />
        </list>
      </field>
    </record>

    <!-- explicit kanban definition -->
    <record id="test_model_view_kanban" model="ir.ui.view">
      <field name="name">evo.connector.view.kanban</field>
      <field name="model">evo_connector</field>
      <field name="arch" type="xml">
        <kanban class="o_kanban_mobile" sample="1">
          <field name="name" />
          <field name="enabled" />
          <templates>
            <t t-name="kanban-box">
              <div t-attf-class="oe_kanban_global_click">
                <div class="row">
                  <div class="col-12">
                    <!---
                    add success if enabled, danger if disabled
                    -->
                    <t t-if="record.enabled.raw_value">
                      <strong class="me-3 text-success">
                        <field name="name" />
                      </strong>
                    </t>
                    <t t-else="">
                      <strong class="me-3 text-danger">
                        <field name="name" />
                      </strong>
                    </t>
                    <t t-if="record.status.raw_value == 'open'">
                      <span class="text-success ms-3">Open</span>
                    </t>
                    <t t-else="">
                      <span class="text-warning ms-3">
                        <field name="status"></field>
                      </span>
                    </t>
                  </div>
                </div>
                <hr class="mt8 mb8" />
                <t t-if="record.description.value">
                  <field name="description" /><br /> Type: <field name="type" />
                </t>
                <br />
                <small>Last message: <field name="last_message_date" /></small>

                <!-- Button to trigger action
                if status is open, show restart and close
                else show start
                -->
                <div class="mt8"></div>
                <t t-if="record.status.raw_value == 'open'">

                  <button class="btn btn-warning btn-sm" name="restart_instance" type="object">
                    Restart
                  </button>
                  <button class="btn btn-danger btn-sm ms-1" name="get_modal_content" type="object">
                    Close
                  </button>
                </t>
                <t t-if="record.status.raw_value == 'closed'">
                  <button class="btn btn-success btn-sm ms-1" name="get_modal_content" type="object">
                    Start
                  </button>
                </t>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>


    <!-- actions opening views on models -->

    <record model="ir.actions.act_window" id="evo.action_window">
      <field name="name">List Connectors</field>
      <field name="res_model">evo_connector</field>
      <field name="view_mode">kanban,list,form</field>
    </record>

    <!-- server action to the one above -->

    <record model="ir.actions.server" id="evo.action_server">
      <field name="name">evo server</field>
      <field name="model_id" ref="model_evo_connector" />
      <field name="state">code</field>
      <field name="code">
        action = {
        "type": "ir.actions.act_window",
        "view_mode": "list,form",
        "res_model": model._name,
        }
      </field>
    </record>

    <!-- Top menu item -->

    <menuitem name="evo" id="evo.menu_root" />

    <!-- menu categories -->

    <menuitem name="Conectors" id="evo.connector" parent="evo.menu_root" action="evo.action_window" />

    <!-- actions -->


  </data>
</odoo>